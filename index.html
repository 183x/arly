<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="test.png" sizes="57x57">
    <title>ar67ly</title>
    <meta name="description" content="位置情報共有アプリ">
    <script>
        var num = 0;
        var watch_id;

        function test() {
            watch_id = navigator.geolocation.watchPosition(test2, function(e) {
                alert(e.message);
            }, {
                "enableHighAccuracy": true,
                "timeout": 20000,
                "maximumAge": 2000
            });
        }

        function clear() {
            navigator.geolocation.clearWatch(watch_id);
        }

        function test2(position) {

            var geo_text = "緯度:" + position.coords.latitude + "\n";
            geo_text += "経度:" + position.coords.longitude + "\n";
            geo_text += "高度:" + position.coords.altitude + "\n";
            geo_text += "位置精度:" + position.coords.accuracy + "\n";
            geo_text += "高度精度:" + position.coords.altitudeAccuracy + "\n";
            geo_text += "移動方向:" + position.coords.heading + "\n";
            geo_text += "速度:" + position.coords.speed + "\n";
            var date = new Date(position.timestamp);
            geo_text += "取得時刻:" + date.toLocaleString() + "\n";
            geo_text += "取得回数:" + (++num) + "\n";

            document.getElementById('position_view').innerHTML = geo_text;

            var target = document.getElementById("sample")
            target.href = "https://www.google.co.jp/maps/@" + position.coords.latitude + "," + position.coords.longitude + ",19z"

            var target = document.getElementById("sample2")
            target.href = "mailto:aru67ly@gmail.com?subject=位置情報共有&body=" + "位置情報の共有メールです！" + "取得時刻" + date.toLocaleString() + "   " + "https://www.google.co.jp/maps/@" + position.coords.latitude + "," + position.coords.longitude + ",19z"

            
        }
    </script>
</head>
<body>

    <font size="6"> <button onclick="test()" style="width: 100%; padding: 40px; background-color:#00ff7f; font-size: 200%;">位置情報を確認</button></font>
    <font size="7"><p>あなたの位置情報</p></font>
    <font size="6"><a id="sample" target="_blank" href='https://aru.pw' style="width: 100%; padding: 45px; background-color:#ffff66; font-size: 150%;">マップを表示</a></font>
    <font size="6"><a id="sample2" target="_blank" href='https://aru.pw' style="width: 100%; padding: 45px; background-color:#00bfff; font-size: 150%;">位置情報を共有</a></font>
    <font size="20"><p><pre id="position_view"></pre></p></font>

</body>

</html>
